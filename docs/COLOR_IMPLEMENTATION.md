# Fleet Color System Implementation

## Overview

This project implements a scalable, theme-aware Fleet color system for all UI components, mirroring JetBrains Fleet's Compose palette and semantic tokens.

---

## Color Data Flow: From Source to UI

```mermaid
graph TD;
  A[Light-Blue.json / Dark-Blue.json\n(src/app/examples/colors/)] --> B[fleet-semantic-colors.json\n(src/lib/)]
  B --> C[fleet-semantic-vars-light.css / fleet-semantic-vars-dark.css\n(project root or src/lib/)]
  C --> D[globals.css / layout.tsx\n(global import)]
  C --> E[Tailwind CSS config\n(tailwind.config.js)]
  D --> F[Component Styles\n(e.g., Button, Input)]
  E --> F
```

---

## 1. **Source of Truth: Theme JSON Files**
- **`Light-Blue.json` and `Dark-Blue.json`** (`src/app/examples/colors/`)
  - Define all **semantic color tokens** (e.g., `button.primary.background.default`, `text.primary`) and map them to palette keys (e.g., `Blue_90`).
  - Also include the full palette (e.g., `Blue_90: #0870E4`).
  - **Edit these files to change or add colors.**

## 2. **Semantic Color Export: fleet-semantic-colors.json**
- **Generated by script:** `scripts/export-fleet-semantic-colors.js`
- **Location:** `src/lib/fleet-semantic-colors.json`
- **Structure:**
  ```json
  {
    "light": { "button.primary.background.default": "Blue_90", ... },
    "dark": { ... }
  }
  ```
- **Purpose:** Central, script-friendly mapping of all semantic tokens to palette keys for both themes.

## 3. **Palette: fleet-palette.json**
- **Location:** `src/lib/fleet-palette.json`
- **Structure:**
  ```json
  { "Blue_90": "#0870E4", ... }
  ```
- **Purpose:** Maps palette keys to hex values. Used to resolve semantic tokens to actual colors.

## 4. **CSS Variable Generation**
- **Script:** `scripts/generate-fleet-css-vars.js`
- **Output:**
  - `fleet-semantic-vars-light.css`
  - `fleet-semantic-vars-dark.css`
- **How it works:**
  - Reads `fleet-semantic-colors.json` and `fleet-palette.json`.
  - For each semantic token, resolves the palette key to a hex value.
  - Outputs CSS variables:
    ```css
    :root {
      --fleet-button-primary-background-default: #0870E4;
      ...
    }
    .dark {
      --fleet-button-primary-background-default: #0870E4;
      ...
    }
    ```
- **Purpose:** Makes all semantic tokens available as CSS variables for both light and dark themes.

## 5. **Global CSS Integration**
- **Files:** `globals.css`, `layout.tsx`
- **What:** Import the generated CSS variable files globally so all components have access to the variables.

## 6. **Tailwind Integration**
- **Config:** `tailwind.config.js`
- **How:**
  - Exposes all Fleet semantic tokens as Tailwind color utilities using the `[var(--...)]` syntax.
  - Example:
    ```js
    colors: {
      fleet: {
        'button-primary-background-default': 'var(--fleet-button-primary-background-default)',
        ...
      }
    }
    ```
  - Use in components:
    ```tsx
    <button className="bg-[var(--fleet-button-primary-background-default)] text-[var(--fleet-button-primary-text-default)]">
      Fleet Primary
    </button>
    ```

## 7. **Component Usage**
- All components (e.g., Button, Input) use the semantic CSS variables for color styling.
- Ensures full theme support and design consistency.
- **Never use raw hex values in components.**

---

## Best Practices
- **Always use semantic tokens** (not raw hex) for component colors.
- **Use Tailwind's arbitrary value syntax** for all Fleet color variables.
- **Import the generated CSS variable files globally** (in both `globals.css` and `layout.tsx`).
- **Test in both light and dark themes** to ensure correct color mapping.
- **For custom components**, use the same CSS variable approach for full theme support.
- **Update color mappings only in JSON**; do not edit TypeScript files for color data.
- **Use the color explorer** (`/examples/colors`) to find and verify color tokens before implementation.

---

## Benefits
- **Theme-aware:** All colors adapt to light/dark mode automatically.
- **Design fidelity:** Matches Fleet Compose palette and semantic system exactly.
- **Scalable:** Easy to add new tokens or palette colors in JSON.
- **Consistent:** All components use the same color source, ensuring visual harmony.
- **Robust:** Validation scripts prevent missing or broken color references.
- **Discoverable:** Interactive color explorer makes finding and using colors easy.

---

## Migration Note
- The old TypeScript-based color system (`fleet-colors.ts`) is **deprecated**. All color data and scripts should use the JSON-based workflow described above.

See also: `BUTTON_IMPLEMENTATION.md`, `ICON_IMPLEMENTATION.md` for usage in components. 